<div id="e3" class="etapa">
            <h5 class="titulo-secao">3. Matriz Lingual ProMax + Registro Fotográfico</h5>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="small fw-bold">CAPTURAR FOTO DA LÍNGUA:</label>
                    <input type="file" id="fotoL" class="form-control" accept="image/*" onchange="previewImage(event)">
                </div>
                <div class="col-md-6 text-center">
                    <div id="imagePreviewContainer" style="width: 100%; height: 120px; border: 2px dashed #ccc; border-radius: 10px; display: flex; align-items: center; justify-content: center; overflow: hidden; background: #eee;">
                        <span id="previewText" class="text-muted small">A foto aparecerá aqui</span>
                        <img id="imgDisplay" src="#" style="display:none; width: 100%; height: 100%; object-fit: cover;">
                    </div>
                </div>
            </div>

            <table>
                <thead><tr><th>SINAL</th><th>PONTA</th><th>LAT</th><th>CENTRO</th><th>RAIZ</th></tr></thead>
                <tbody id="tongueBody"></tbody>
            </table>
            
            <textarea id="obsLingua" class="form-control mt-3" rows="2" placeholder="Notas da língua..."></textarea>
            
            <div class="d-flex gap-2 mt-4">
                <button class="btn btn-secondary w-50" onclick="ir(2)">VOLTAR</button>
                <button class="btn-pro w-50" onclick="ir(4)">PULSOS & MU</button>
            </div>
        </div>

<script>
    // Nova função para visualizar a foto antes de salvar
    function previewImage(event) {
        const reader = new FileReader();
        reader.onload = function() {
            const output = document.getElementById('imgDisplay');
            const text = document.getElementById('previewText');
            output.src = reader.result;
            output.style.display = "block";
            text.style.display = "none";
        };
        reader.readAsDataURL(event.target.files[0]);
    }

    // ... (Mantendo as funções de salvar e inicializar da V. 7.1) ...
</script>
